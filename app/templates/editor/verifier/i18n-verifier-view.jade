.container
  button(@click="showCampaigns = !showCampaigns", :disabled="campaigns.length === 0")
    | Toggle campaigns
  span(v-if="selectedCampaign")
    | Current: {{selectedCampaign.name}}
  br
  div(v-if="showCampaigns")
    a(v-for="campaign in campaigns"
      @click="selectedCampaign = campaign")
      {{ campaign.name }}
      =", "
  button(@click="showLevels = !showLevels", :disabled="!selectedCampaign")
    | Toggle levels
  span(v-if="levelSlug")
    | Current: {{levelSlug}}
  br
  div(v-if="showLevels")
    a(v-for="level in selectedCampaign.levelsArray"
      @click="(levelSlug = level.slug) && getProblems()")
      {{ level.name }}
      =", "
  form(action="")
    input(v-model:value="levelSlug")
    button(@click.prevent="getProblems")
      | Get Problems
  select(v-model="language")
    option(value="en") en
    option(value="de-DE") de-DE
  br
  label
    | Partial threshold %
    input(type="number" step="1" v-model:value="partialThreshold")
  label
    | Complete threshold %
    input(type="number" step="1" v-model:value="completeThreshold")
  label
    | Count threshold %
    input(type="number" step="0.2" v-model:value="countThreshold")
  select(v-model="displayMode")
    option human-readable
    option export
  | Total errors: {{ totalCount }}
  table.human-readable(v-if="displayMode === 'human-readable'")
    tr
      th
        | Original
      th
        | Translated
      th
        | Trimmed
      th
        | Difference
      th
        | Frequency
      
    tr(v-for="problem in problems", :style="{ backgroundColor: color(problem) }")
      td {{ problem.message }}
      td {{ problem.translated }}
      td {{ problem.trimmed.length }}
      td {{ percentDifference(problem) }}%
      td {{ (problem.count / totalCount * 100).toFixed(1) }}%
  
  .export(v-else)
    tr
      td.counts
        pre
          div(v-for="problem, index in exportList",
             :style="{ backgroundColor: color(problem) }")
            span {{ (problem.count / totalCount * 100).toFixed(1) }}%
            br
      td
        pre
          div(v-for="problem, index in exportList",
             :style="{ backgroundColor: color(problem) }")
            span {{ slugifyProblem(problem) }}: "{{ problem.trimmed }}"
            br
          
